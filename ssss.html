<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16ã‚¿ã‚¤ãƒ—æ€§æ ¼è¨ºæ–­ - Advanced</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --bg: #f3f4f6;
            --card: #ffffff;
            --text: #1f2937;
        }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            color: var(--text);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: var(--card);
            width: 90%;
            max-width: 600px;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        h1 {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
            transition: transform 0.2s;
        }
        .btn:active { transform: scale(0.98); }
        .btn-option {
            background: white;
            color: var(--text);
            border: 2px solid #e5e7eb;
            box-shadow: none;
        }
        .btn-option:hover {
            border-color: var(--primary);
            background: #f5f3ff;
        }

        /* ç”»é¢åˆ‡ã‚Šæ›¿ãˆç”¨ */
        .screen { display: none; animation: fadeIn 0.5s ease; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* çµæœç”»é¢ */
        .type-code {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: 2px;
            margin: 0;
        }
        .type-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #4b5563;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 20px 0;
        }
        
        /* ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ */
        .share-btn {
            background-color: #000;
            margin-top: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
    </style>
</head>
<body>

    <div class="container">
        
        <div id="screen-start" class="screen active">
            <h1>ğŸŒ 16ã‚¿ã‚¤ãƒ—æ€§æ ¼è¨ºæ–­</h1>
            <p>4ã¤ã®æŒ‡æ¨™ã‹ã‚‰ã‚ãªãŸã®æœ¬è³ªã‚’åˆ†æã—ã€<br>ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã§å¯è¦–åŒ–ã—ã¾ã™ã€‚</p>
            <button class="btn" onclick="startQuiz()">è¨ºæ–­ã‚’å§‹ã‚ã‚‹</button>
        </div>

        <div id="screen-question" class="screen">
            <p style="color:#888; font-size:0.9rem;">Q <span id="q-number">1</span> / 8</p>
            <h2 id="q-text" style="min-height: 3em;">è³ªå•æ–‡</h2>
            <div id="options-area"></div>
        </div>

        <div id="screen-loading" class="screen">
            <h2>åˆ†æä¸­...</h2>
            <p>AIãƒ­ã‚¸ãƒƒã‚¯ãŒçµæœã‚’ç®—å‡ºã—ã¦ã„ã¾ã™</p>
            <div style="font-size: 3rem;">ğŸ§ âœ¨</div>
        </div>

        <div id="screen-result" class="screen">
            <p>ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã¯...</p>
            <div class="type-code" id="result-code">ESTJ</div>
            <div class="type-name" id="result-name">å¹¹éƒ¨ã‚¿ã‚¤ãƒ—</div>
            
            <div class="chart-container">
                <canvas id="radarChart"></canvas>
            </div>

            <p id="result-desc" style="text-align:left; line-height:1.6; padding:10px;">è§£èª¬æ–‡</p>
            
            <button class="btn share-btn" onclick="shareTwitter()">
                ğ• ã§çµæœã‚’ã‚·ã‚§ã‚¢
            </button>
            <br><br>
            <button class="btn btn-option" onclick="location.reload()">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
        </div>

    </div>

    <script>
        // â–¼â–¼â–¼ è¨­å®šã‚¨ãƒªã‚¢ï¼šã“ã“ã‚’ç·¨é›†ã—ã¦ã‚ªãƒªã‚¸ãƒŠãƒ«ã«ï¼ â–¼â–¼â–¼

        // 4ã¤ã®è»¸ã®å®šç¾©ï¼ˆä¾‹ï¼šMBTIé¢¨ï¼‰
        // E=å¤–å‘, I=å†…å‘ | S=æ„Ÿè¦š, N=ç›´æ„Ÿ | T=æ€è€ƒ, F=æ„Ÿæƒ… | J=åˆ¤æ–­, P=çŸ¥è¦š
        // ã‚¹ã‚³ã‚¢ãŒãƒ—ãƒ©ã‚¹ãªã‚‰å·¦å´(E,S,T,J)ã€ãƒã‚¤ãƒŠã‚¹ãªã‚‰å³å´(I,N,F,P)ã¨ã—ã¾ã™

        const questions = [
            // è»¸1: Energy (E vs I)
            { text: "å¤§å‹¢ã®äººãŒã„ã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã¯ï¼Ÿ", axis: "EI", options: [{t:"æ¥½ã—ã„ï¼ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ã‚‚ã‚‰ãˆã‚‹", v:1}, {t:"ç–²ã‚Œã‚‹â€¦æ—©ãå¸°ã‚ŠãŸã„", v:-1}] },
            { text: "ä¼‘æ—¥ã®éã”ã—æ–¹ã¯ï¼Ÿ", axis: "EI", options: [{t:"èª°ã‹ã‚’èª˜ã£ã¦éŠã³ã«è¡Œã", v:1}, {t:"å®¶ã§ä¸€äººã§ã‚†ã£ãã‚Šã™ã‚‹", v:-1}] },
            
            // è»¸2: Mind (S vs N)
            { text: "ç‰©äº‹ã‚’è€ƒãˆã‚‹ã¨ãã¯ï¼Ÿ", axis: "SN", options: [{t:"ç¾å®Ÿçš„ã§å…·ä½“çš„ãªãƒ‡ãƒ¼ã‚¿é‡è¦–", v:1}, {t:"æœªæ¥ã®å¯èƒ½æ€§ã‚„ç†æƒ³ã‚’é‡è¦–", v:-1}] },
            { text: "èª¬æ˜æ›¸ã‚’èª­ã‚€ã®ã¯ï¼Ÿ", axis: "SN", options: [{t:"ã—ã£ã‹ã‚Šèª­ã‚“ã§ã‹ã‚‰å§‹ã‚ã‚‹", v:1}, {t:"ã¨ã‚Šã‚ãˆãšè§¦ã‚ŠãªãŒã‚‰è¦šãˆã‚‹", v:-1}] },

            // è»¸3: Nature (T vs F)
            { text: "å‹äººãŒæ‚©ã‚“ã§ã„ãŸã‚‰ï¼Ÿ", axis: "TF", options: [{t:"è§£æ±ºç­–ã‚’ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã™ã‚‹", v:1}, {t:"ã¾ãšã¯æ°—æŒã¡ã«å…±æ„Ÿã™ã‚‹", v:-1}] },
            { text: "åˆ¤æ–­ã®åŸºæº–ã¯ï¼Ÿ", axis: "TF", options: [{t:"è«–ç†ã‚„å…¬å¹³ã•ã‚’å„ªå…ˆ", v:1}, {t:"äººã®æ„Ÿæƒ…ã‚„èª¿å’Œã‚’å„ªå…ˆ", v:-1}] },

            // è»¸4: Tactics (J vs P)
            { text: "æ—…è¡Œã®è¨ˆç”»ã¯ï¼Ÿ", axis: "JP", options: [{t:"åˆ†åˆ»ã¿ã§ã—ã£ã‹ã‚Šæ±ºã‚ã‚‹", v:1}, {t:"ãã®å ´ã®æ°—åˆ†ã§è‡ªç”±ã«å‹•ã", v:-1}] },
            { text: "æœºã®ä¸Šã¯ï¼Ÿ", axis: "JP", options: [{t:"ã„ã¤ã‚‚æ•´ç†æ•´é “ã•ã‚Œã¦ã„ã‚‹", v:1}, {t:"å¿…è¦ãªã‚‚ã®ãŒæ•£ã‚‰ã°ã£ã¦ã„ã‚‹", v:-1}] }
        ];

        // 16ã‚¿ã‚¤ãƒ—ã®çµæœãƒ‡ãƒ¼ã‚¿
        // ã‚­ãƒ¼ã¯4ã¤ã®æ–‡å­—ã®çµ„ã¿åˆã‚ã›ï¼ˆE/I, S/N, T/F, J/Pï¼‰
        const resultsData = {
            "ESTJ": { name: "å³æ ¼ãªç®¡ç†è€…", desc: "çœŸé¢ç›®ã§è²¬ä»»æ„ŸãŒå¼·ãã€ç§©åºã‚’å¤§åˆ‡ã«ã™ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã€‚ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚Šã€åŠ¹ç‡çš„ã«ç‰©äº‹ã‚’é€²ã‚ã¾ã™ã€‚" },
            "ESTP": { name: "æ´»å‹•çš„ãªå†’é™ºå®¶", desc: "ã‚¹ãƒªãƒ«ã‚’æ¥½ã—ã¿ã€ãã®å ´ã§å•é¡Œã‚’è§£æ±ºã™ã‚‹è¡Œå‹•æ´¾ã€‚ã˜ã£ã¨ã—ã¦ã„ã‚‹ã®ãŒè‹¦æ‰‹ã§ã€å¸¸ã«åˆºæ¿€ã‚’æ±‚ã‚ã¾ã™ã€‚" },
            "ESFJ": { name: "å¿ƒå„ªã—ã„æ”¯æ´è€…", desc: "å”èª¿æ€§ãŒé«˜ãã€å‘¨ã‚Šã®äººã¸ã®æ°—é…ã‚Šã‚’å¿˜ã‚Œãªã„äººæ°—è€…ã€‚ãƒãƒ¼ãƒ ã®èª¿å’Œã‚’ä½•ã‚ˆã‚Šå¤§åˆ‡ã«ã—ã¾ã™ã€‚" },
            "ESFP": { name: "è‡ªç”±ãªã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼", desc: "äººç”Ÿã‚’æ¥½ã—ã‚€å¤©æ‰ã€‚æ˜ã‚‹ãç¤¾äº¤çš„ã§ã€å‘¨ã‚Šã®äººã‚’ç¬‘é¡”ã«ã™ã‚‹ã®ãŒå¾—æ„ã§ã™ã€‚" },
            "ENTJ": { name: "å¤§èƒ†ãªæŒ‡æ®å®˜", desc: "é•·æœŸçš„ãªãƒ“ã‚¸ãƒ§ãƒ³ã‚’æŒã¡ã€è«–ç†çš„ã«äººã€…ã‚’ç‡ã„ã‚‹ã‚«ãƒªã‚¹ãƒãƒªãƒ¼ãƒ€ãƒ¼ã€‚å›°é›£ãªèª²é¡Œã»ã©ç‡ƒãˆã¾ã™ã€‚" },
            "ENTP": { name: "è³¢ã„è¨è«–è€…", desc: "é ­ã®å›è»¢ãŒé€Ÿãã€æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ¬¡ã€…ã¨ç”Ÿã¿å‡ºã™ç™ºæ˜å®¶æ°—è³ªã€‚è­°è«–ã‚’æ¥½ã—ã‚€ã‚¿ã‚¤ãƒ—ã§ã™ã€‚" },
            "ENFJ": { name: "æƒ…ç†±çš„ãªä¸»äººå…¬", desc: "äººã€…ã®æˆé•·ã‚’å¿ƒã‹ã‚‰é¡˜ã„ã€åŠ±ã¾ã™ã‚«ãƒªã‚¹ãƒã€‚è¨€è‘‰ã«åŠ›ãŒã‚ã‚Šã€å‘¨ã‚Šã‚’ãƒã‚¸ãƒ†ã‚£ãƒ–ã«å·»ãè¾¼ã¿ã¾ã™ã€‚" },
            "ENFP": { name: "åºƒå ±é‹å‹•å®¶", desc: "è‡ªç”±å¥”æ”¾ã§å‰µé€ åŠ›è±Šã‹ã€‚æ–°ã—ã„å¯èƒ½æ€§ã«ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã€ç›´æ„Ÿã«å¾“ã£ã¦ç”Ÿãã‚‹æƒ…ç†±å®¶ã§ã™ã€‚" },
            "ISTJ": { name: "å®Ÿç›´ãªè«–ç†ä¸»ç¾©è€…", desc: "äº‹å®Ÿã«åŸºã¥ãã€ã‚³ãƒ„ã‚³ãƒ„ã¨è²¬å‹™ã‚’æœãŸã™ä¿¡é ¼ã®ãŠã‘ã‚‹äººã€‚ä¼çµ±ã‚„ç§©åºã‚’é‡ã‚“ã˜ã¾ã™ã€‚" },
            "ISTP": { name: "å†·é™ãªå·¨åŒ ", desc: "è¦³å¯Ÿçœ¼ãŒé‹­ãã€é“å…·ã‚’ä½¿ã„ã“ãªã™è·äººæ°—è³ªã€‚å£æ•°ã¯å°‘ãªã„ãŒã€å¥½å¥‡å¿ƒæ—ºç››ã§è§£æå¥½ãã§ã™ã€‚" },
            "ISFJ": { name: "çŒ®èº«çš„ãªæ“è­·è€…", desc: "å‹¤å‹‰ã§æ€ã„ã‚„ã‚ŠãŒã‚ã‚Šã€å¤§åˆ‡ãªäººã‚’å®ˆã‚‹ãŸã‚ã«å°½åŠ›ã—ã¾ã™ã€‚ç¸ã®ä¸‹ã®åŠ›æŒã¡ã‚¿ã‚¤ãƒ—ã€‚" },
            "ISFP": { name: "ç¹Šç´°ãªèŠ¸è¡“å®¶", desc: "æ¸©åšã§æ„Ÿå—æ€§è±Šã‹ã€‚å‹ã«ã¯ã¾ã‚‰ãšã€è‡ªåˆ†ã‚‰ã—ã„ç¾å­¦ã‚„æ„Ÿæ€§ã‚’å¤§åˆ‡ã«ã—ã¦ç”Ÿãã¦ã„ã¾ã™ã€‚" },
            "INTJ": { name: "å»ºç¯‰å®¶", desc: "æƒ³åƒåŠ›ãŒè±Šã‹ã§ã€æˆ¦ç•¥çš„ã«ç‰©äº‹ã‚’è€ƒãˆã‚‹å®Œç’§ä¸»ç¾©è€…ã€‚ç‹¬å‰µçš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¾å®Ÿã«å¤‰ãˆã‚‹åŠ›ã‚’æŒã¡ã¾ã™ã€‚" },
            "INTP": { name: "è«–ç†çš„ãªå­¦è€…", desc: "çŸ¥è­˜æ¬²ãŒå¼·ãã€å®‡å®™ã®çœŸç†ã‚„ä»•çµ„ã¿ã‚’è§£ãæ˜ã‹ã™ã®ãŒå¥½ãã€‚ç‹¬è‡ªã®ä¸–ç•Œè¦³ã‚’æŒã¤æ€æƒ³å®¶ã€‚" },
            "INFJ": { name: "æå”±è€…", desc: "å¼·ã„ä¿¡å¿µã¨ç†æƒ³ã‚’æŒã¡ã€ä¸–ç•Œã‚’è‰¯ãã—ã‚ˆã†ã¨ã™ã‚‹é™ã‹ãªæƒ…ç†±å®¶ã€‚æ´å¯ŸåŠ›ãŒéå¸¸ã«é‹­ã„ã§ã™ã€‚" },
            "INFP": { name: "ä»²ä»‹è€…", desc: "è©©çš„ã§è¦ªåˆ‡ãªç†æƒ³ä¸»ç¾©è€…ã€‚è‡ªåˆ†ã®ä¾¡å€¤è¦³ã‚’å¤§åˆ‡ã«ã—ã€ä»–è€…ã®è‰¯ã„ã¨ã“ã‚ã‚’è¦‹ã¤ã‘ã‚‹ã®ãŒå¾—æ„ã§ã™ã€‚" }
        };

        // â–²â–²â–² è¨­å®šã‚¨ãƒªã‚¢çµ‚äº† â–²â–²â–²

        let currentQ = 0;
        let scores = { "EI": 0, "SN": 0, "TF": 0, "JP": 0 };

        // ç”»é¢é·ç§»é–¢æ•°
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // è¨ºæ–­é–‹å§‹
        function startQuiz() {
            showScreen('screen-question');
            renderQuestion();
        }

        // è³ªå•è¡¨ç¤º
        function renderQuestion() {
            const q = questions[currentQ];
            document.getElementById('q-number').innerText = currentQ + 1;
            document.getElementById('q-text').innerText = q.text;
            const area = document.getElementById('options-area');
            area.innerHTML = "";

            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'btn btn-option';
                btn.innerText = opt.t;
                btn.onclick = () => next(q.axis, opt.v);
                area.appendChild(btn);
            });
        }

        // æ¬¡ã¸
        function next(axis, value) {
            scores[axis] += value;
            currentQ++;
            if (currentQ < questions.length) {
                renderQuestion();
            } else {
                showLoading();
            }
        }

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¼”å‡º
        function showLoading() {
            showScreen('screen-loading');
            setTimeout(() => {
                calcResult();
            }, 1500); // 1.5ç§’å¾…ã¤
        }

        // çµæœè¨ˆç®—ãƒ»è¡¨ç¤º
        function calcResult() {
            // 4æ–‡å­—ã®ã‚¿ã‚¤ãƒ—ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
            const type = (
                (scores.EI >= 0 ? "E" : "I") +
                (scores.SN >= 0 ? "S" : "N") +
                (scores.TF >= 0 ? "T" : "F") +
                (scores.JP >= 0 ? "J" : "P")
            );

            const data = resultsData[type];
            document.getElementById('result-code').innerText = type;
            document.getElementById('result-name').innerText = data.name;
            document.getElementById('result-desc').innerText = data.desc;

            showScreen('screen-result');
            drawChart();
        }

        // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæç”»
        function drawChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            // ã‚¹ã‚³ã‚¢ã‚’0-100ã®ã‚¹ã‚±ãƒ¼ãƒ«ç­‰ã«è¦‹ã›ã‚‹ãŸã‚ã®åŠ å·¥ï¼ˆçµ¶å¯¾å€¤ã‚’ä½¿ç”¨ãªã©ï¼‰
            // ã“ã“ã§ã¯å˜ç´”ã«å„è»¸ã®ã€Œå‚¾å‘ã€ã‚’è¡¨ç¤ºã—ã¾ã™
            // Eå¯„ã‚Šãªã‚‰å·¦ã€Iå¯„ã‚Šãªã‚‰å³ã«ä¼¸ã³ã‚‹...ã§ã¯ãªãã€
            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆç”¨ã«ã€Œå¤–å‘æ€§ã€ã€Œç›´è¦³æ€§ã€ã€Œè«–ç†æ€§ã€ã€Œè¨ˆç”»æ€§ã€ã®å¼·ã•ã¨ã—ã¦å¤‰æ›
            const rawData = [
                scores.EI + 2, // è£œæ­£ã—ã¦ãƒ—ãƒ©ã‚¹ã®å€¤ã«ã™ã‚‹(ç°¡æ˜“çš„)
                scores.SN + 2,
                scores.TF + 2,
                scores.JP + 2
            ];

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['å¤–å‘æ€§(E)', 'æ„Ÿè¦š(S)', 'æ€è€ƒ(T)', 'åˆ¤æ–­(J)'],
                    datasets: [{
                        label: 'ã‚ãªãŸã®æ€§æ ¼ãƒãƒ©ãƒ³ã‚¹',
                        data: rawData,
                        backgroundColor: 'rgba(99, 102, 241, 0.2)',
                        borderColor: '#6366f1',
                        pointBackgroundColor: '#a855f7',
                        borderWidth: 2
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            suggestedMax: 5, // è³ªå•æ•°ã«å¿œã˜ã¦èª¿æ•´
                            ticks: { display: false } // ç›®ç››ã‚Šæ•°å­—ã‚’æ¶ˆã™
                        }
                    }
                }
            });
        }

        // X(Twitter)ã‚·ã‚§ã‚¢
        function shareTwitter() {
            const code = document.getElementById('result-code').innerText;
            const name = document.getElementById('result-name').innerText;
            const text = `ç§ã®æ€§æ ¼ã‚¿ã‚¤ãƒ—ã¯ã€${code}ï¼š${name}ã€‘ã§ã—ãŸï¼%0aã¿ã‚“ãªã‚‚è¨ºæ–­ã—ã¦ã¿ã¦ã­ï¼%0a#16ã‚¿ã‚¤ãƒ—è¨ºæ–­`;
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }
    </script>
</body>
</html>
